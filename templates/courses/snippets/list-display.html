<!-- Enhanced Course/Lesson List with Material Design and Lazy Loading -->
<div class="grid gap-6 sm:gap-8 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3">
    {% for object in queryset %}
    <article
        class="card group relative bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-md hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1">

        <!-- Status Badge -->
        {% if object.is_coming_soon %}
        <div
            class="absolute top-4 right-4 z-10 bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-4 py-1.5 rounded-full text-xs font-semibold shadow-lg">
            <span class="flex items-center gap-1">
                <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd"
                        d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"
                        clip-rule="evenodd" />
                </svg>
                Coming Soon
            </span>
        </div>
        {% endif %}

        <!-- Thumbnail with Lazy Loading -->
        {% if object.get_thumbnail %}
        <a href="{{ object.get_absolute_url }}"
            class="block relative overflow-hidden aspect-w-16 aspect-h-9 bg-gray-200 dark:bg-gray-700">
            <!-- Placeholder (blur-up) -->
            <div
                class="absolute inset-0 bg-gradient-to-br from-gray-300 to-gray-400 dark:from-gray-700 dark:to-gray-800 animate-pulse">
            </div>

            <!-- Actual Image (lazy loaded) -->
            <img class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"
                src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 9'%3E%3C/svg%3E"
                data-src="{{ object.get_thumbnail }}" alt="{{ object.title }}" loading="lazy" decoding="async">

            <!-- Overlay on Hover -->
            <div
                class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end p-4">
                <span class="text-white text-sm font-medium flex items-center gap-2">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd"
                            d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"
                            clip-rule="evenodd" />
                    </svg>
                    Watch Now
                </span>
            </div>
        </a>
        {% endif %}

        <!-- Card Content -->
        <div class="p-6 space-y-4">

            <!-- Title -->
            <h2
                class="text-xl sm:text-2xl font-bold tracking-tight text-gray-900 dark:text-white line-clamp-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors">
                <a href="{{ object.get_absolute_url }}" class="hover:underline">
                    {{ object.title }}
                </a>
            </h2>

            <!-- Description (if available) -->
            {% if object.description %}
            <p class="text-gray-600 dark:text-gray-400 text-sm line-clamp-3">
                {{ object.description|truncatewords:20 }}
            </p>
            {% endif %}

            <!-- Meta Information -->
            <div class="flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700">

                <!-- Duration/Lessons Count (if applicable) -->
                <div class="flex items-center gap-2 text-gray-500 dark:text-gray-400 text-sm">
                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd"
                            d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"
                            clip-rule="evenodd" />
                    </svg>
                    <span>{% if object.lesson_set.count %}{{ object.lesson_set.count }} lessons{% else %}New{% endif %}</span>
                </div>

                <!-- CTA Button -->
                <a href="{{ object.get_absolute_url }}"
                    class="inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105">
                    <span>View</span>
                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd"
                            d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z"
                            clip-rule="evenodd" />
                    </svg>
                </a>
            </div>

        </div>

        <!-- Ripple Effect Container -->
        <div class="ripple-container absolute inset-0 pointer-events-none overflow-hidden"></div>

    </article>
    {% empty %}
    <!-- Empty State -->
    <div class="col-span-full text-center py-12">
        <svg class="w-16 h-16 mx-auto text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4" />
        </svg>
        <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">No courses available</h3>
        <p class="text-gray-600 dark:text-gray-400">Check back soon for new content!</p>
    </div>
    {% endfor %}
</div>

<script>
    // Ripple effect on card click
    document.querySelectorAll('.card').forEach(card => {
        card.addEventListener('click', function (e) {
            const ripple = document.createElement('span');
            const rect = this.getBoundingClientRect();
            const size = Math.max(rect.width, rect.height);
            const x = e.clientX - rect.left - size / 2;
            const y = e.clientY - rect.top - size / 2;

            ripple.style.width = ripple.style.height = size + 'px';
            ripple.style.left = x + 'px';
            ripple.style.top = y + 'px';
            ripple.classList.add('ripple');

            const rippleContainer = this.querySelector('.ripple-container');
            if (rippleContainer) {
                rippleContainer.appendChild(ripple);
                setTimeout(() => ripple.remove(), 600);
            }
        });
    });
</script>

<style>
    .ripple {
        position: absolute;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.5);
        transform: scale(0);
        animation: ripple-animation 0.6s ease-out;
    }

    @keyframes ripple-animation {
        to {
            transform: scale(4);
            opacity: 0;
        }
    }

    .line-clamp-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .line-clamp-3 {
        display: -webkit-box;
        -webkit-line-clamp: 3;
        line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    /* Aspect ratio for images */
    .aspect-w-16 {
        position: relative;
        padding-bottom: 56.25%;
        /* 16:9 */
    }

    .aspect-w-16>* {
        position: absolute;
        height: 100%;
        width: 100%;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
    }
</style>